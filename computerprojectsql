CREATE TABLE "user" (
	"uno"	number(3)		NOT NULL,
	"uname"	varchar(20)		NULL,
	"uid"	varchar(15)		NULL,
	"upwd"	varchar(20)		NULL,
	"regdate"	date		NULL,
	"birth"	date		NULL,
	"addr"	varchar(100)		NULL,
	"phone"	number(11)		NULL
);

CREATE TABLE "cart" (
	"tno"	number(2)		NOT NULL,
	"pno"	VARCHAR(255)		NOT NULL,
	"uno"	number(3)		NOT NULL
);

CREATE TABLE "question" (
	"qno"	number(4)		NOT NULL,
	"qtitle"	varchar(100)		NULL,
	"qcon"	varchar(500)		NULL,
	"qdate"	date		NULL,
	"qhit"	number(4)		NULL,
	"uno"	number(3)		NOT NULL
);

CREATE TABLE "product" (
	"pname"	varchar(70)		NULL,
	"price"	number(7)		NULL,
	"pdesc"	varchar(1000)		NULL,
	"tno"	number(2)		NOT NULL,
	"pno"	VARCHAR(255)		NOT NULL
);

CREATE TABLE "payment" (
	"payno"	number(4)		NOT NULL,
	"uno"	number(3)		NOT NULL,
	"tno"	number(2)		NOT NULL,
	"pno"	VARCHAR(255)		NOT NULL,
	"pay"	varchar(50)		NULL,
	"payaddr"	varchar(100)		NULL
);

CREATE TABLE "type" (
	"tno"	number(2)		NOT NULL,
	"pno"	VARCHAR(255)		NOT NULL,
	"tname"	varchar(30)		NULL
);

CREATE TABLE "qanswer" (
	"qno"	number(4)		NOT NULL,
	"qatitle"	varchar(100)		NULL,
	"qacon"	varchar(500)		NULL,
	"qadate"	date		NULL
);

CREATE TABLE "review" (
	"rno"	number(3)		NOT NULL,
	"rtitle"	varchar(100)		NULL,
	"rcon"	varchar(1000)		NULL,
	"rscor"	number(1)		NULL,
	"rdate"	date		NULL,
	"payno"	number(4)		NOT NULL,
	"uno2"	number(3)		NOT NULL,
	"tno2"	number(2)		NOT NULL,
	"pno2"	VARCHAR(255)		NOT NULL
);

CREATE TABLE "ranswer" (
	"rno"	number(3)		NOT NULL,
	"ratitle"	varchar(100)		NULL,
	"racon"	varchar(500)		NULL,
	"radate"	date		NULL
);

ALTER TABLE "user" ADD CONSTRAINT "PK_USER" PRIMARY KEY (
	"uno"
);

ALTER TABLE "cart" ADD CONSTRAINT "PK_CART" PRIMARY KEY (
	"tno",
	"pno",
	"uno"
);

ALTER TABLE "question" ADD CONSTRAINT "PK_QUESTION" PRIMARY KEY (
	"qno"
);

ALTER TABLE "payment" ADD CONSTRAINT "PK_PAYMENT" PRIMARY KEY (
	"payno",
	"uno",
	"tno",
	"pno"
);

ALTER TABLE "type" ADD CONSTRAINT "PK_TYPE" PRIMARY KEY (
	"tno",
	"pno"
);

ALTER TABLE "qanswer" ADD CONSTRAINT "PK_QANSWER" PRIMARY KEY (
	"qno"
);

ALTER TABLE "review" ADD CONSTRAINT "PK_REVIEW" PRIMARY KEY (
	"rno"
);

ALTER TABLE "ranswer" ADD CONSTRAINT "PK_RANSWER" PRIMARY KEY (
	"rno"
);

ALTER TABLE "cart" ADD CONSTRAINT "FK_type_TO_cart_1" FOREIGN KEY (
	"tno"
)
REFERENCES "type" (
	"tno"
);

ALTER TABLE "cart" ADD CONSTRAINT "FK_type_TO_cart_2" FOREIGN KEY (
	"pno"
)
REFERENCES "type" (
	"pno"
);

ALTER TABLE "cart" ADD CONSTRAINT "FK_user_TO_cart_1" FOREIGN KEY (
	"uno"
)
REFERENCES "user" (
	"uno"
);

ALTER TABLE "payment" ADD CONSTRAINT "FK_user_TO_payment_1" FOREIGN KEY (
	"uno"
)
REFERENCES "user" (
	"uno"
);

ALTER TABLE "payment" ADD CONSTRAINT "FK_type_TO_payment_1" FOREIGN KEY (
	"tno"
)
REFERENCES "type" (
	"tno"
);

ALTER TABLE "payment" ADD CONSTRAINT "FK_type_TO_payment_2" FOREIGN KEY (
	"pno"
)
REFERENCES "type" (
	"pno"
);

ALTER TABLE "qanswer" ADD CONSTRAINT "FK_question_TO_qanswer_1" FOREIGN KEY (
	"qno"
)
REFERENCES "question" (
	"qno"
);

ALTER TABLE "ranswer" ADD CONSTRAINT "FK_review_TO_ranswer_1" FOREIGN KEY (
	"rno"
)
REFERENCES "review" (
	"rno"
);
